<mujoco model="ackermann_robot">
  <compiler angle="radian"/>
  
  <option timestep="0.002" gravity="0 0 -9.81"/>
  
  <worldbody>
    <light name="top" pos="0 0 3" dir="0 0 -1" diffuse=".6 .6 .6" specular="0.1 0.1 0.1"/>
    <geom name="floor" pos="0 0 0" size="40 40 .1" type="plane" rgba="0.9 0.9 0.9 1"/>
    
    <!-- Chassis box: length=0.275, width=0.15, height=0.1 -->
    <!-- size uses half-dimensions -->
    <body name="chassis" pos="0 0 0.065">
      <geom name="chassis_geom" type="box" size="0.1375 0.075 0.02" rgba="0.2 0.4 0.8 1" mass="10"/>
      
      <!-- Rear wheels (with encoders) at x=-0.12, y=±0.06, z=0.065; radius=0.065 -->
      <body name="rear_left" pos="-0.10 0.09 -0.03">
        <geom name="rear_left_wheel_geom" type="cylinder" size="0.0325 0.01" euler="1.57079632679 0 0" rgba="0.1 0.1 0.1 1"/>
        <joint name="rear_left_wheel" type="hinge" axis="0 1 0" damping="0.05"/>
      </body>
      <body name="rear_right" pos="-0.10 -0.09 -0.03">
        <geom name="rear_right_wheel_geom" type="cylinder" size="0.0325 0.01" euler="1.57079632679 0 0" rgba="0.1 0.1 0.1 1"/>
        <joint name="rear_right_wheel" type="hinge" axis="0 1 0" damping="0.05"/>
      </body>
      
      <!-- Front wheels with steering at x=+0.12, y=±0.06, z=0.065; radius=0.065 -->
      <body name="front_left_steer" pos="0.10 0.09 -0.03">
        <inertial pos="0 0 0" mass="0.1" diaginertia="1e-4 1e-4 1e-4"/>
        <joint name="front_left_steer" type="hinge" axis="0 1 0" range="-0.6 0.6" damping="0.05"/>
        <body name="front_left" pos="0 0 0">
          <geom name="front_left_wheel_geom" type="cylinder" size="0.0325 0.01" euler="1.57079632679 0 0" rgba="0.1 0.1 0.1 1"/>
          <joint name="front_left_wheel" type="hinge" axis="0 1 0" damping="0.05"/>
        </body>
      </body>
      <body name="front_right_steer" pos="0.10 -0.09 -0.03">
        <inertial pos="0 0 0" mass="0.1" diaginertia="1e-4 1e-4 1e-4"/>
        <joint name="front_right_steer" type="hinge" axis="0 1 0" range="-0.6 0.6" damping="0.05"/>
        <body name="front_right" pos="0 0 0">
          <geom name="front_right_wheel_geom" type="cylinder" size="0.0325 0.01" euler="1.57079632679 0 0" rgba="0.1 0.1 0.1 1"/>
          <joint name="front_right_wheel" type="hinge" axis="0 1 0" damping="0.05"/>
        </body>
      </body>
    </body>
  </worldbody>
  
  <sensor>
    <!-- Encoders for rear wheel rotation -->
    <jointpos name="rear_left_encoder" joint="rear_left_wheel"/>
    <jointpos name="rear_right_encoder" joint="rear_right_wheel"/>
    
    <!-- Optional: expose front steering angles and wheel spins too -->
    <jointpos name="front_left_steer_angle" joint="front_left_steer"/>
    <jointpos name="front_right_steer_angle" joint="front_right_steer"/>
    <jointpos name="front_left_wheel_pos" joint="front_left_wheel"/>
    <jointpos name="front_right_wheel_pos" joint="front_right_wheel"/>
  </sensor>
  
  <actuator>
    <!-- Steering position control -->
    <position name="front_left_steer_act" joint="front_left_steer" kp="100" kv="10" forcerange="-50 50"/>
    <position name="front_right_steer_act" joint="front_right_steer" kp="100" kv="10" forcerange="-50 50"/>
    
    <!-- Rear wheel drive (velocity control) -->
    <velocity name="rear_left_drive" joint="rear_left_wheel" kv="10" forcerange="-100 100"/>
    <velocity name="rear_right_drive" joint="rear_right_wheel" kv="10" forcerange="-100 100"/>
  </actuator>
</mujoco>